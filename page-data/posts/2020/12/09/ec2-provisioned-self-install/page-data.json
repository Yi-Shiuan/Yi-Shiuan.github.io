{
    "componentChunkName": "component---src-pages-posts-tsx",
    "path": "/posts/2020/12/09/ec2-provisioned-self-install",
    "result": {"data":{"mdx":{"id":"ff06f0c8-ce30-5349-a3cb-8d9486624064","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"如何讓AWS EC2開機後就能上線\",\n  \"description\": \"在雲端服務一定會遇到的是機器的擴展(scale out)與縮編(scale in)的問題，如果一個AutoScaling Group觸發了機器的成長時肯定是無法靠手動 的方式來安裝機器，所以必須要透過全資動畫的方式進行，這時候我一開始的想法是在AutoScaling發生的時候觸法Jenkins的Job來安裝系統， 但這有個問題是我整個aws的服務都必須依賴在Jenkins上，後來同事指導了一個做法只需要透過AWS的設定就可以自動裝機了！\",\n  \"tags\": [\"ec2\", \"aws\", \"cd\", \"devops\", \"prevision\"],\n  \"date\": \"2020-12-09T00:00:00.000Z\",\n  \"published\": true\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"\\u5BEB\\u5728\\u524D\\u9762\"), mdx(\"p\", null, \"\\u5728\\u96F2\\u7AEF\\u670D\\u52D9\\u4E00\\u5B9A\\u6703\\u9047\\u5230\\u7684\\u662F\\u6A5F\\u5668\\u7684\\u64F4\\u5C55(scale out)\\u8207\\u7E2E\\u7DE8(scale in)\\u7684\\u554F\\u984C\\uFF0C\\u5982\\u679C\\u4E00\\u500BAutoScaling Group\\u89F8\\u767C\\u4E86\\u6A5F\\u5668\\u7684\\u6210\\u9577\\u6642\\u80AF\\u5B9A\\u662F\\u7121\\u6CD5\\u9760\\u624B\\u52D5\\n\\u7684\\u65B9\\u5F0F\\u4F86\\u5B89\\u88DD\\u6A5F\\u5668\\uFF0C\\u6240\\u4EE5\\u5FC5\\u9808\\u8981\\u900F\\u904E\\u5168\\u8CC7\\u52D5\\u756B\\u7684\\u65B9\\u5F0F\\u9032\\u884C\\uFF0C\\u9019\\u6642\\u5019\\u6211\\u4E00\\u958B\\u59CB\\u7684\\u60F3\\u6CD5\\u662F\\u5728AutoScaling\\u767C\\u751F\\u7684\\u6642\\u5019\\u89F8\\u6CD5Jenkins\\u7684Job\\u4F86\\u5B89\\u88DD\\u7CFB\\u7D71\\uFF0C\\n\\u4F46\\u9019\\u6709\\u500B\\u554F\\u984C\\u662F\\u6211\\u6574\\u500Baws\\u7684\\u670D\\u52D9\\u90FD\\u5FC5\\u9808\\u4F9D\\u8CF4\\u5728Jenkins\\u4E0A\\uFF0C\\u5F8C\\u4F86\\u540C\\u4E8B\\u6307\\u5C0E\\u4E86\\u4E00\\u500B\\u505A\\u6CD5\\u53EA\\u9700\\u8981\\u900F\\u904EAWS\\u7684\\u8A2D\\u5B9A\\u5C31\\u53EF\\u4EE5\\u81EA\\u52D5\\u88DD\\u6A5F\\u4E86\\uFF01\"), mdx(\"h2\", null, \"User Data\"), mdx(\"p\", null, \"\\u4E00\\u76F4\\u4EE5\\u4F86\\u90FD\\u6C92\\u5F9E\\u9084\\u6C92\\u6CE8\\u610F\\u904EAWS\\u5728\\u5EFA\\u7ACBEC2\\u6216\\u662F\\u5728Launch template\\u4ECB\\u9762\\u4E0A\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"user data\"), \"\\uFF0Cuser data\\u4E2D\\u7684\\u6307\\u4EE4AWS\\u6703\\u5728\\u6211\\u5011EC2\\u958B\\u6A5F\\u7684\\u904E\\u7A0B\\u4E2D\\u70BA\\u6211\\u5011\\u57F7\\u884C\\n\\u5982\\u6B64\\u4E00\\u4F86\\u5C31\\u53EF\\u4EE5\\u4E0D\\u9700\\u8981\\u4F9D\\u8CF4\\u4EFB\\u4F55\\u4E00\\u500B\\u5DE5\\u5177\\u5C31\\u53EF\\u4EE5\\u5B8C\\u6210\\u8332\\u52D5\\u756B\\u7684\\u4F5C\\u696D\\u4E86\\u3002\"), mdx(\"img\", {\n    \"src\": \"./ec2-create-instance.png\",\n    \"alt\": \"create instance 的 user data\"\n  }), mdx(\"img\", {\n    \"src\": \"./launch-template.png\",\n    \"alt\": \"launch template 的 user data\"\n  }), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\",\n    \"metastring\": \"script\",\n    \"script\": true\n  }, \"#!/bin/bash -xe\\naws s3 cp s3://{{your s3 bucket}}/main.sh main.sh --region {{your region}}\\nbash main.sh\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u5728\\u6211\\u540C\\u4E8B\\u7684\\u6307\\u9EDE\\u4E2D\\uFF0C\\u4ED6\\u5EFA\\u8B70\\u5728user data\\u4E2D\\u4E0D\\u8981\\u653E\\u7F6E\\u5E36\\u591A\\u7684\\u6307\\u4EE4\\u78BC\\u800C\\u662F\\u7528\\u4F86\\u4E0B\\u8F09\\u5165\\u53E3\\u6307\\u4EE4\\u78BC\\u8207\\u57F7\\u884C\\u5165\\u53E3\\u6307\\u4EE4\\u78BC\\u7684\\u5167\\u5BB9\\u5C31\\u597D\")), mdx(\"h3\", null, \"main.sh\"), mdx(\"p\", null, \"\\u5728\\u5165\\u53E3\\u8173\\u672C\\u4E2D\\u4E00\\u500B\\u5F88\\u91CD\\u8981\\u7684\\u4E8B\\u60C5\\u662F\\u8FA8\\u8B58\\u6A5F\\u5668\\u9700\\u8981\\u5B89\\u88DD\\u54EA\\u4E9B\\u6771\\u897F\\u4EE5\\u53CA\\u8981\\u505A\\u54EA\\u4E9B\\u4E8B\\u60C5\\uFF0C\\u4F46\\u4E0D\\u592A\\u60F3\\u8B93user data\\u6709\\u592A\\u591A\\u7684\\u7248\\u672C\\u907F\\u514D\\u5718\\u968A\\u6210\\u54E1\\u4E2D\\u8907\\u88FD\\u6642\\u51FA\\u932F\\uFF0C\\n\\u6240\\u4EE5\\u5728EC2\\u7684Tag\\u4E2D\\u505A\\u4E86\\u4E00\\u4E9B\\u624B\\u8173\\uFF0C\\u4F9D\\u7167EC2 Tag\\u7684\\u8A2D\\u5B9A\\u5B89\\u88DD\\u4E0D\\u540C\\u7684\\u8EDF\\u9AD4\"), mdx(\"p\", null, \"\\u5728\\u53D6\\u5F97EC2 Tag\\u6642\\u5176\\u5BE6\\u9700\\u8981\\u5148\\u505A\\u5F88\\u591A\\u4E8B\\u60C5\\uFF0C\\u9996\\u5148\\u8981\\u5148\\u53D6\\u5F97EC2 instance Id...\\u4F46\\u53D6\\u7684EC2 Instance Id\\u524D\\u8981\\u5148\\u53D6\\u5F97Region....\\n\\u7136\\u5F8C\\u767C\\u73FE\\u6709\\u4E00\\u500B\\u795E\\u79D8\\u7684API endpoint \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://169.254.169.254/latest/dynamic/instance-identity/document\"), \" \\u53EF\\u4EE5\\u53D6\\u5F97\\u9019\\u985E\\u7684\\u8A0A\\u606F\\uFF0C\\u7136\\u4FAF\\u56DE\\u50B3\\u7684\\u662F\\u4E00\\u500BJson\\u7684\\u8CC7\\u6599\\u683C\\u5F0F\"), mdx(\"p\", null, \"\\u5728shell \\u64CD\\u4F5CJson\\u7684\\u8CC7\\u6599\\u683C\\u5F0F\\uFF0C\\u4E0D\\u5916\\u4E4E\\u5C31\\u662Fjq\\u9019\\u500B\\u5957\\u4EF6\\u4E86...\\u6240\\u4EE5\\u6211\\u7684\\u5165\\u53E3\\u8173\\u672C\\u7B2C\\u4E00\\u4EF6\\u4E8B\\u5C31\\u662F\\u5B89\\u88DDjq\\uFF0C\\u63A5\\u4E0B\\u4F86\\u624D\\u662F\\u53BB\\u53D6\\u5F97EC2 instance\\u7684\\u8CC7\\u6599\"), mdx(\"p\", null, \"\\u7576\\u6709\\u4E86instance id\\u8207region\\u6642\\u5C31\\u53EF\\u4EE5\\u53D6\\u5F97Tag\\u8CC7\\u8A0A\\u4E86\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"EC2\\u7684Tag\"), mdx(\"ol\", {\n    parentName: \"blockquote\"\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Service: \\u8A2D\\u5B9A\\u6A5F\\u5668\\u4E3B\\u8981\\u627F\\u8F09\\u7684\\u670D\\u52D9\\u985E\\u578B\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Docker: \\u662F\\u5426\\u70BA\\u9019\\u53F0\\u6A5F\\u5668\\u5B89\\u88DDdocker\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\",\n    \"metastring\": \"script\",\n    \"script\": true\n  }, \"#!/bin/bash -xe\\n\\nexec > >(tee /var/log/user-data.log|logger -t user-data -s 2>/dev/console) 2>&1\\nsudo yum install -y jq\\nsudo apt-get install -y jq\\n\\nREGION=`curl -s http://169.254.169.254/latest/dynamic/instance-identity/document | jq .region -r`\\naws s3 cp s3://ec2-initial-script/functions.sh ./functions.sh --region ap-northeast-1\\nsource ./functions.sh\\nlog \\\"Start setup script\\\"\\n\\nlog \\\"EC2 Instance Process\\\" \\\"Region:\\\" $REGION\\nEC2_INSTANCE_ID=`curl -s http://169.254.169.254/latest/dynamic/instance-identity/document | jq .instanceId -r`\\nlog \\\"EC2 instance Id: ${EC2_INSTANCE_ID}\\\"\\nTAGS=\\\"$(aws ec2 describe-tags --filter \\\"Name=resource-id,Values=${EC2_INSTANCE_ID}\\\" --region ${REGION})\\\"\\n\\nlog \\\"DOCKER Process\\\"\\nDOCKER=`echo $TAGS | jq -r '.Tags[] | select(.Key == \\\"Docker\\\").Value'`\\nlog \\\"DOCKER Install ${DOCKER}\\\"\\n\\nif [[ \\\"$DOCKER\\\" == \\\"yes\\\" ]]; then\\n    log \\\"DOCKER Install ... \\\"\\n    sudo yum update -y\\n    sudo amazon-linux-extras install docker -y\\n    sudo service docker start\\n    sudo usermod -a -G docker ec2-user\\n    sudo systemctl restart docker\\n    log \\\"DOCKER Install Successfully\\\"\\n\\n    log \\\"DOCKER-COMPOSE Install ... \\\"\\n    sudo curl -L \\\"https://github.com/docker/compose/releases/download/1.25.0/docker-compose-$(uname -s)-$(uname -m)\\\" \\\\\\n              -o /usr/local/bin/docker-compose\\n    sudo chmod +x /usr/local/bin/docker-compose\\n    sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\\n    sudo systemctl enable docker\\n    log \\\"DOCKER-COMPOSE Install Successfully \\\"\\nfi;\\n\\nSERVICE=`echo $TAGS | jq -r '.Tags[] | select(.Key == \\\"Service\\\").Value'`\\nlog \\\"Download ${SERVICE}.sh\\\"\\naws s3 cp s3://{{s3 bucket}}/$SERVICE/install.sh /install.sh\\n\\nlog \\\"Execute ${SERVICE} script\\\"\\nbash install.sh \\\"${TAGS}\\\" \\\"${REGION}\\\" \\\"${EC2_INSTANCE_ID}\\\"\\n\\nlog \\\"End scripting\\\"\\n\")), mdx(\"h3\", null, \"install.sh\"), mdx(\"p\", null, \"user data\\u53EA\\u8CA0\\u8CAC\\u4E0B\\u8F09\\u8207\\u57F7\\u884C\\u5165\\u53E3\\u8173\\u672C\\u5728\\u5165\\u53E3\\u8173\\u672C\\u4E2D\\u9084\\u8981\\u57F7\\u884C\\u670D\\u52D9\\u8173\\u672C\\uFF0C\\u670D\\u52D9\\u8173\\u672C\\u662F\\u7528\\u4F86\\u5B89\\u88DDapplication\\u7684\\uFF01\\n\\u5728\\u5165\\u53E3\\u8173\\u672C\\u4E2D\\u6703\\u7528EC2\\u7684Service Tag\\u5230S3 Bucket\\u4E0B\\u8F09\\u5C0D\\u61C9\\u7684install.sh\\u4F86\\u5B89\\u88DD\\u8207\\u8A2D\\u5B9Aapplication\\u6240\\u9700\\u8981\\u7684\\u8A2D\\u5B9A\"), mdx(\"h4\", null, \"ECS\\u7684\\u5B89\\u88DD\\u8173\\u672C\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\",\n    \"metastring\": \"script\",\n    \"script\": true\n  }, \"#!/bin/bash -xe\\n\\nsource ./functions.sh\\nTAGS=$1\\nREGION=$2\\nINSTANCE=$3\\n\\nlog \\\"ECS Install ... \\\"\\n\\nECS_CLUSTER=`echo $TAGS | jq -r '.Tags[] | select(.Key == \\\"ECS:cluster\\\").Value'`\\nsudo mkdir /etc/ecs\\ncat << EOF > /etc/ecs/ecs.config\\nECS_DATADIR=/data\\nECS_ENABLE_TASK_IAM_ROLE=true\\nECS_ENABLE_TASK_IAM_ROLE_NETWORK_HOST=true\\nECS_LOGFILE=/log/ecs-agent.log\\nECS_AVAILABLE_LOGGING_DRIVERS=[\\\"json-file\\\",\\\"awslogs\\\"]\\nECS_LOGLEVEL=info\\nECS_CLUSTER=$ECS_CLUSTER\\nEOF\\n\\ndocker run -d --name ecs-agent \\\\\\n    --detach=true \\\\\\n    --restart=always \\\\\\n    --volume=/var/run:/var/run \\\\\\n    --volume=/var/log/ecs/:/log \\\\\\n    --volume=/var/lib/ecs/data:/data \\\\\\n    --volume=/etc/ecs:/etc/ecs \\\\\\n    --net=host \\\\\\n    --env-file=/etc/ecs/ecs.config \\\\\\n    --log-driver json-file \\\\\\n    --log-opt max-size=100m \\\\\\n    amazon/amazon-ecs-agent:latest\\n\\nlog \\\"ECS Install Successfully \\\"\\n\")), mdx(\"h3\", null, \"\\u7E3D\\u7D50\"), mdx(\"p\", null, \"\\u4F7F\\u7528user data\\u53EF\\u4EE5\\u505A\\u5230\\u7CFB\\u7D71\\u81EA\\u52D5\\u5316\\u800C\\u4E14\\u9084\\u4E0D\\u9700\\u8981\\u4F9D\\u8CF4\\u4EFB\\u4F55\\u7684\\u5DE5\\u5177\\uFF0C\\u4E0D\\u904E\\u5728\\u4F7F\\u7528\\u9019\\u6A23\\u7684\\u65B9\\u5F0F\\u6642\\u9700\\u8981\\u5C0D\\u6574\\u500BOS, shell script\\uFF08\\u5982\\u679C\\u7528windows\\u5C31\\u5F97\\u5C0Dpowershell\\u719F\\u6089\\uFF09\\n\\u4EE5\\u53CA\\u5C0Daws cli\\u6709\\u8DB3\\u5920\\u7684\\u80FD\\u529B\\u624D\\u6709\\u6A5F\\u6703\\u505A\\u51FA\\u9019\\u6A23\\u7684\\u8173\\u672C\\uFF0C\\u6709\\u4E86\\u9019\\u6A23\\u7684\\u8173\\u672C\\u624D\\u80FD\\u505A\\u5230100\\uFF05\\u7684\\u81EA\\u52D5\\u5316\\u3002\\n\\u5728\\u76EE\\u524D\\u5DF2\\u7D93\\u505A\\u5230\\u5B8C\\u6574\\u7684\\u81EA\\u52D5\\u5316\\u7684\\u90E8\\u7F72\\u6A21\\u5F0F\\uFF0C\\u6211\\u5011\\u5718\\u968A\\u7684CI server, Staging\\u74B0\\u5883\\u6BCF\\u5929\\u4E0B\\u73ED\\u5F8C\\u81EA\\u52D5\\u95DC\\u6A5F\\u4E0A\\u73ED\\u524D\\u6703\\u81EA\\u52D5\\u958B\\u6A5F\\u4E26\\u4E14\\u5B89\\u88DD\\u6574\\u500Bapplication\\n\\u5728production\\u7684\\u74B0\\u5883\\u88E1\\uFF0C\\u81EA\\u52D5\\u5316\\u64F4\\u5C55\\u6642Windows\\u7684\\u6A5F\\u5668\\u7D04\\u83AB15\\u5206\\u9418\\uFF0CLinux\\u7684\\u6A5F\\u5668\\u7D04\\u83AB5~7\\u5206\\u9418\\u5C31\\u80FD\\u8A2D\\u5B9A\\u5B8C\\u6210\\u4E26\\u4E14\\u670D\\u52D9\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u5728AWS\\u7684Image\\u4E2D\\u53EA\\u8A2D\\u5B9A\\u4E86\\u9810\\u5148\\u88DD\\u597DIIS\\u7684Windows\\u6A5F\\u5668\\uFF0C\\u6B64\\u76EE\\u7684\\u662F\\u70BA\\u4E86\\u7BC0\\u7701\\u5B89\\u88DDIIS\\u7684\\u6642\\u9593\\u6210\\u672C\\u8B93\\u6A5F\\u5668\\u53EF\\u4EE5\\u66F4\\u5FEB\\u7684\\u4E0A\\u7DDA\\u670D\\u52D9\\u6E1B\\u5C11\\u652F\\u51FA\\n\\u5176\\u4ED6Linux\\u7684\\u6A5F\\u5668\\u90FD\\u53EA\\u6709\\u9078\\u64C7AWS Linux2\\u7684image\\uFF0C\\u4E26\\u6C92\\u6709\\u7279\\u5225\\u505A\\u4EFB\\u4F55\\u8A2D\\u5B9A\"), mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"windows\\u7684\\u6A5F\\u5668\\u5728AWS\\u958B\\u6A5F\\u4F7F\\u7528T3.Medium\\u7684\\u901F\\u5EA6\\u4E00\\u822C\\u4F86\\u8AAA\\u90FD\\u572815\\u5206\\u9418\\u5DE6\\u53F3\\u5B8C\\u6210\")), mdx(\"h3\", null, \"EC2 instance \\u7684\\u76F8\\u95DC\\u6642\\u9593\\u4F30\\u7B97\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Target\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Script\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u8ACB\\u6C42\\u6A5F\\u5668\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u79FB\\u4EA4\\u6A5F\\u5668\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Provisioned\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Health check\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u4E0A\\u7DDA\\u6642\\u9593\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Windows Server\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"3~5 min\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"1.5 min\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"7~9 min\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"5 min\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"1.5min\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"15~22 min\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Linux Server\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"3~5 min\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"1.5 min\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"5~7 min\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"3 min\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"1.5min\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"9~13 min\")))), mdx(\"h2\", null, \"\\u76F8\\u95DC\\u9023\\u7D50\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://stedolan.github.io/jq/\"\n  }, \"JQ github page\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"如何讓AWS EC2開機後就能上線","description":"在雲端服務一定會遇到的是機器的擴展(scale out)與縮編(scale in)的問題，如果一個AutoScaling Group觸發了機器的成長時肯定是無法靠手動 的方式來安裝機器，所以必須要透過全資動畫的方式進行，這時候我一開始的想法是在AutoScaling發生的時候觸法Jenkins的Job來安裝系統， 但這有個問題是我整個aws的服務都必須依賴在Jenkins上，後來同事指導了一個做法只需要透過AWS的設定就可以自動裝機了！","date":"09 Dec 2020","tags":["ec2","aws","cd","devops","prevision"]},"fields":{"path":"/2020/12/09/ec2-provisioned-self-install"}}},"pageContext":{"id":"ff06f0c8-ce30-5349-a3cb-8d9486624064"}},
    "staticQueryHashes": ["2069471281","2579648174","3564308881","3595704592","3673915224"]}