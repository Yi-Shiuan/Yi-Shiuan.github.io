{
    "componentChunkName": "component---src-pages-posts-tsx",
    "path": "/posts/2021/01/07/best-practice-layout-in-nextjs",
    "result": {"data":{"mdx":{"id":"042df689-c15c-5277-9233-cee424b1034a","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Next.js 的Layout最佳配置\",\n  \"description\": \"新專案即將完成之際，我們開始對各個頁面上的效能與一些過去被我們忽略的問題進行修正， 在這修正的過程中我發現了在每一次頁面切換時都會出現網站的Logo消失又再出現的問題， Logo是一個經常變動的圖片所以在專案中是透過GQL取得Logo的CDN位置後才做渲染的， 再深入排查後才發現原來過去我的觀念不是非常正確所以用這篇來筆記一下正確地處理做法，當作小抄避免未來再犯同樣的錯誤。\",\n  \"date\": \"2021-01-07T00:00:00.000Z\",\n  \"tags\": [\"react\", \"next.js\", \"frontend\", \"layout\"],\n  \"published\": true\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"\\u524D\\u60C5\\u63D0\\u8981\"), mdx(\"p\", null, \"\\u65B0\\u5C08\\u6848\\u5373\\u5C07\\u5B8C\\u6210\\u4E4B\\u969B\\uFF0C\\u6211\\u5011\\u958B\\u59CB\\u5C0D\\u5404\\u500B\\u9801\\u9762\\u4E0A\\u7684\\u6548\\u80FD\\u8207\\u4E00\\u4E9B\\u904E\\u53BB\\u88AB\\u6211\\u5011\\u5FFD\\u7565\\u7684\\u554F\\u984C\\u9032\\u884C\\u4FEE\\u6B63\\uFF0C\\n\\u5728\\u9019\\u4FEE\\u6B63\\u7684\\u904E\\u7A0B\\u4E2D\\u6211\\u767C\\u73FE\\u4E86\\u5728\\u6BCF\\u4E00\\u6B21\\u9801\\u9762\\u5207\\u63DB\\u6642\\u90FD\\u6703\\u51FA\\u73FE\\u7DB2\\u7AD9\\u7684Logo\\u6D88\\u5931\\u53C8\\u518D\\u51FA\\u73FE\\u7684\\u554F\\u984C\\uFF0C\\nLogo\\u662F\\u4E00\\u500B\\u7D93\\u5E38\\u8B8A\\u52D5\\u7684\\u5716\\u7247\\u6240\\u4EE5\\u5728\\u5C08\\u6848\\u4E2D\\u662F\\u900F\\u904EGQL\\u53D6\\u5F97Logo\\u7684CDN\\u4F4D\\u7F6E\\u5F8C\\u624D\\u505A\\u6E32\\u67D3\\u7684\\uFF0C\\n\\u518D\\u6DF1\\u5165\\u6392\\u67E5\\u5F8C\\u624D\\u767C\\u73FE\\u539F\\u4F86\\u904E\\u53BB\\u6211\\u7684\\u89C0\\u5FF5\\u4E0D\\u662F\\u975E\\u5E38\\u6B63\\u78BA\\u6240\\u4EE5\\u7528\\u9019\\u7BC7\\u4F86\\u7B46\\u8A18\\u4E00\\u4E0B\\u6B63\\u78BA\\u5730\\u8655\\u7406\\u505A\\u6CD5\\uFF0C\\u7576\\u4F5C\\u5C0F\\u6284\\u907F\\u514D\\u672A\\u4F86\\u518D\\u72AF\\u540C\\u6A23\\u7684\\u932F\\u8AA4\\u3002\"), mdx(\"h2\", null, \"Next.js Layout\\u6700\\u4F73\\u914D\\u7F6E\"), mdx(\"p\", null, \"\\u5728Next.js\\u7684Layout\\u6700\\u4F73\\u914D\\u7F6E\\u61C9\\u8A72\\u662F\\u628ALayout\\u7684component\\u653E\\u5728\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"_app.tsx\"), \"\\u4E2D\\uFF0C\\u5728\\u8F49\\u63DB\\u9801\\u9762\\u6642\\u5C31\\u4E0D\\u6703\\u518D\\u51FA\\u73FE\\u524D\\u60C5\\u63D0\\u8981\\u7684\\u76F8\\u95DC\\u554F\\u984C\\u4E86\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\",\n    \"metastring\": \"jsx\",\n    \"jsx\": true\n  }, \"function App({Component, pageProps }: AppProps): any {\\n    const apolloClient: any = useApollo(pageProps.initialApolloState);\\n\\n    return <ApolloProvider client={apolloClient}>\\n            <Layout>\\n                <Component {...pageProps} />\\n            </Layout>\\n        </ApolloProvider>\\n}\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\",\n    \"metastring\": \"jsx\",\n    \"jsx\": true\n  }, \"const Index: NextPage<any> = (props: any): any => {\\n    return <>\\n            {/*index content*/}\\n        </>\\n};\\n\")), mdx(\"h3\", null, \"\\u5728\\u5F97\\u5230\\u7D50\\u8AD6\\u524D\\u7684\\u4E00\\u4E9B\\u6392\\u67E5\\u9EDE\"), mdx(\"p\", null, \"\\u5728\\u4E00\\u958B\\u59CB\\u6211\\u5011\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"_app.tsx\"), \"\\u8207\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.tsx\"), \"\\u6216\\u5176\\u4ED6page\\u90FD\\u662F\\u9019\\u6A23\\u7684\\u8A2D\\u8A08\\uFF0C\\u5728Layout\\u4E2D\\u6709\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Header\"), \"\\u8207\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Footer\"), \"\\u5169\\u500Bcomponent\\u4EE5\\u53CA\\u8CA0\\u8CAC\\u6240\\u6709\\u9801\\u9762\\u4E0A\\u7684\\u7248\\u9762\\u914D\\u7F6E\\uFF0C\\n\\u5176\\u4E2DHeader\\u9019\\u500Bcomponent\\u4E2D\\u53BB\\u53D6\\u5F97GQL\\u8CC7\\u6599\\uFF0C\\u4F46\\u56E0\\u70BA\\u4ED6\\u662F\\u5C6C\\u65BCReact FunctionComponent\\u7684\\u7BC4\\u7587\\uFF0C\\u6545\\u7121\\u6CD5\\u4F7F\\u7528getInitialProps\\u9019\\u985E\\u7684function\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\",\n    \"metastring\": \"jsx\",\n    \"jsx\": true\n  }, \"function App({Component, pageProps }: AppProps): any {\\n    const apolloClient: any = useApollo(pageProps.initialApolloState);\\n\\n    return <ApolloProvider client={apolloClient}>\\n            <Component {...pageProps} />\\n        </ApolloProvider>\\n}\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\",\n    \"metastring\": \"jsx\",\n    \"jsx\": true\n  }, \"const Index: NextPage<any> = (props: any): any => {\\n    return <Layout>\\n            {/*index content*/}\\n        </Layout>\\n};\\n\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u5728\\u65B9\\u6848\\u4E00\\u7684\\u6211\\u662F\\u900F\\u904EReact Memo\\u7684\\u65B9\\u5F0FCache Layout\\u8D77\\u4F86\\u4E0B\\u6B21\\u4F7F\\u7528Layout \\u9019\\u500Bcomponent\\u6642\\u5C31\\u4E0D\\u6703\\u518D\\u91CD\\u65B0\\u6E32\\u67D3\\uFF0C\\u4F46\\u7D50\\u679C\\u662F\\u4ECD\\u7136\\u6BCF\\u6B21\\u91CD\\u65B0\\u6E32\\u67D3Layout\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u5728_app.tsx\\u4E2D\\u53D6\\u5F97\\u76F8\\u95DC\\u7684Layout\\u914D\\u7F6E\\u6240\\u9700\\u8981\\u7684\\u5716\\u6A94\\u8207\\u6587\\u5B57\\uFF0C\\u900F\\u904Eprops\\u7684\\u65B9\\u5F0F\\u50B3\\u5165\\u7D66Layout\\u4E2D\\u4E26\\u8B93Header\\u5728Server side \\u6E32\\u67D3\\uFF0C\\n\\u4F46\\u56E0\\u70BAprogress image\\u7684\\u4F7F\\u7528\\u6240\\u4EE5Logo\\u4ECD\\u7136\\u6703\\u6709\\u9583\\u4E00\\u4E0B\\u7684\\u60C5\\u6CC1\")), mdx(\"p\", null, \"\\u7136\\u5F8C\\u5728\\u5B98\\u7DB2\\u4E0A\\u770B\\u5230\\u4E86\\u9019\\u9EBC\\u4E00\\u6BB5....\\n\\u6700\\u5F8C\\u6211\\u628ALayout\\u653E\\u7F6E\\u5230\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"_app.tsx\"), \"\\u4E2D\\uFF0C\\u5C31\\u53EF\\u4EE5\\u5982\\u6211\\u5011\\u9810\\u671F\\u7684\\u4E00\\u958B\\u59CB\\u51FA\\u73FE\\u4E86progress image\\u7684Logo\\u518D\\u51FA\\u73FE\\u771F\\u6B63\\u7684Logo\\uFF0C\\u5728\\u6BCF\\u6B21\\u8F49\\u9801\\u6642\\u4E5F\\u6C92\\u6709\\u91CD\\u65B0\\u6E32\\u67D3\\u76F8\\u95DC\\u7684Layout component\"), mdx(\"p\", null, \"\\u6211\\u60F3\\u4E3B\\u8981\\u7684\\u5E7E\\u500B\\u539F\\u56E0\\u662F\\uFF0C_app.tsx\\u7684\\u57F7\\u884C\\u6642\\u9593\\u4EE5\\u53CA\\u5728\\u8F49\\u9801\\u6E32\\u67D3\\u7684\\u6700\\u5C0F\\u55AE\\u4F4D\\u662F\\u6574\\u500BNext page\\u4E0D\\u662F\\u63A1\\u7528\\u5DEE\\u7570\\u7684\\u65B9\\u5F0F\\u91CD\\u65B0\\u6E32\\u67D3\\u3002\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Next.js uses the App component to initialize pages. You can override it and control the page initialization. Which allows you to do amazing things like:\"), mdx(\"ul\", {\n    parentName: \"blockquote\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Persisting layout between page changes\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Keeping state when navigating pages\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Custom error handling using componentDidCatch\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Inject additional data into pages\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Add global CSS\")), mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://nextjs.org/docs/advanced-features/custom-app\"\n  }, \"Next.js Custom APP\"))), mdx(\"h3\", null, \"\\u76F8\\u95DC\\u9023\\u7D50\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://nextjs.org/docs/advanced-features/custom-app\"\n  }, \"Next.js Custom APP\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Next.js 的Layout最佳配置","description":"新專案即將完成之際，我們開始對各個頁面上的效能與一些過去被我們忽略的問題進行修正， 在這修正的過程中我發現了在每一次頁面切換時都會出現網站的Logo消失又再出現的問題， Logo是一個經常變動的圖片所以在專案中是透過GQL取得Logo的CDN位置後才做渲染的， 再深入排查後才發現原來過去我的觀念不是非常正確所以用這篇來筆記一下正確地處理做法，當作小抄避免未來再犯同樣的錯誤。","date":"07 Jan 2021","tags":["react","next.js","frontend","layout"]},"fields":{"path":"/2021/01/07/best-practice-layout-in-nextjs"}}},"pageContext":{"id":"042df689-c15c-5277-9233-cee424b1034a"}},
    "staticQueryHashes": ["2069471281","2579648174","3564308881","3595704592","3673915224"]}